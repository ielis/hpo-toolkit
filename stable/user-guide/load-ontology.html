<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Load ontology &mdash; hpo-toolkit 0.5.3 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
      <link rel="stylesheet" type="text/css" href="../_static/hpo-toolkit.css" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../_static/documentation_options.js?v=2a2fe768"></script>
        <script src="../_static/doctools.js?v=9a2dae69"></script>
        <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
        <script src="../_static/copybutton.js?v=35a8b989"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Use ontology" href="use-ontology.html" />
    <link rel="prev" title="User guide" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            hpo-toolkit
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../setup.html">Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">User guide</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Load ontology</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#ontology-loaders">Ontology loaders</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#low-level-loader">Low level loader</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#loading-other-ontologies">Loading other ontologies</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#ontology-store">Ontology store</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#support-for-other-ontologies">Support for other ontologies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#next-steps">Next steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="use-ontology.html">Use ontology</a></li>
<li class="toctree-l2"><a class="reference internal" href="use-hierarchy.html">Use ontology hierarchy</a></li>
<li class="toctree-l2"><a class="reference internal" href="load-hpo-annotations.html">HPO annotations</a></li>
<li class="toctree-l2"><a class="reference internal" href="validate-phenotypic-features.html">Validate phenotypic features</a></li>
<li class="toctree-l2"><a class="reference internal" href="sort-term-ids.html">Sorting term IDs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../apidocs/modules.html">API reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">hpo-toolkit</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">User guide</a></li>
      <li class="breadcrumb-item active">Load ontology</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/user-guide/load-ontology.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="load-ontology">
<span id="rstload-ontology"></span><h1>Load ontology<a class="headerlink" href="#load-ontology" title="Link to this heading"></a></h1>
<p>Loading HPO is the first item of all analysis task lists.
HPO toolkit supports loading the ontology data from an <a class="reference external" href="https://github.com/geneontology/obographs">Obographs</a>
JSON file which is available for download from the <a class="reference external" href="https://hpo.jax.org/app/data/ontology">HPO website</a>.</p>
<section id="ontology-loaders">
<h2>Ontology loaders<a class="headerlink" href="#ontology-loaders" title="Link to this heading"></a></h2>
<p>HPO toolkit provides 2 ways for loading an ontology: a low-level loader and a high-level <code class="xref py py-class docutils literal notranslate"><span class="pre">OntologyStore</span></code>.</p>
<section id="low-level-loader">
<h3>Low level loader<a class="headerlink" href="#low-level-loader" title="Link to this heading"></a></h3>
<p>The low-level loader function loads a <a class="reference internal" href="../apidocs/hpotk.ontology.html#hpotk.ontology.MinimalOntology" title="hpotk.ontology.MinimalOntology"><code class="xref py py-class docutils literal notranslate"><span class="pre">hpotk.ontology.MinimalOntology</span></code></a> from a local or remote resource.
The loader will open the resource and parse its contents into an ontology. Any failure is reported as an exception.</p>
<p>Let’s load the HPO version released on Oct 9th, 2023:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">hpotk</span>

<span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://github.com/obophenotype/human-phenotype-ontology/releases/download/v2023-10-09/hp.json&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hpo</span> <span class="o">=</span> <span class="n">hpotk</span><span class="o">.</span><span class="n">load_minimal_ontology</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hpo</span><span class="o">.</span><span class="n">version</span>
<span class="go">&#39;2023-10-09&#39;</span>
</pre></div>
</div>
<p>We use the <a class="reference internal" href="../apidocs/hpotk.ontology.load.obographs.html#hpotk.ontology.load.obographs.load_minimal_ontology" title="hpotk.ontology.load.obographs.load_minimal_ontology"><code class="xref py py-func docutils literal notranslate"><span class="pre">hpotk.ontology.load.obographs.load_minimal_ontology()</span></code></a> function to fetch the Obographs JSON file
and to load the data into <a class="reference internal" href="../apidocs/hpotk.ontology.html#hpotk.ontology.MinimalOntology" title="hpotk.ontology.MinimalOntology"><code class="xref py py-class docutils literal notranslate"><span class="pre">hpotk.ontology.MinimalOntology</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The loader can fetch the HPO from a local path (relative or absolute), or from a URL,
and it transparently handles decompression of gzipped files if the file name has a <cite>.gz</cite> suffix.</p>
</div>
<p>A similar loader function <a class="reference internal" href="../apidocs/hpotk.ontology.load.obographs.html#hpotk.ontology.load.obographs.load_ontology" title="hpotk.ontology.load.obographs.load_ontology"><code class="xref py py-func docutils literal notranslate"><span class="pre">hpotk.ontology.load.obographs.load_ontology()</span></code></a> exists
to load an <a class="reference internal" href="../apidocs/hpotk.ontology.html#hpotk.ontology.Ontology" title="hpotk.ontology.Ontology"><code class="xref py py-class docutils literal notranslate"><span class="pre">hpotk.ontology.Ontology</span></code></a>.</p>
</section>
</section>
<section id="loading-other-ontologies">
<h2>Loading other ontologies<a class="headerlink" href="#loading-other-ontologies" title="Link to this heading"></a></h2>
<p>HPO toolkit primarily supports HPO, but few other ontologies were tested as an experimental feature.</p>
<p>HPO toolkit should load Medical Action Ontology (MAxO) and Mondo Disease Ontology (MONDO).
For instance:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://github.com/monarch-initiative/MAxO/releases/download/v2024-05-24/maxo.json&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maxo</span> <span class="o">=</span> <span class="n">hpotk</span><span class="o">.</span><span class="n">load_minimal_ontology</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">prefixes_of_interest</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;MAXO&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">maxo</span><span class="o">.</span><span class="n">version</span>
<span class="go">&#39;2024-05-24&#39;</span>
</pre></div>
</div>
<p>We provided <cite>prefixes_of_interest</cite> option to limit the terms to those with <cite>MAXO</cite> prefix,
effectively discarding all terms of other ontologies from the loading process. In result,
the ontology includes only the <cite>MAXO</cite> terms along with the corresponding ontology graph.</p>
<section id="ontology-store">
<h3>Ontology store<a class="headerlink" href="#ontology-store" title="Link to this heading"></a></h3>
<p>Alternatively, we can use the <code class="xref py py-class docutils literal notranslate"><span class="pre">hpotk.util.store.OntologyStore</span></code>, a class that wraps the low-level loader
and provides more convenience.</p>
<p>Using <cite>OntologyStore</cite> provides several benefits. <cite>OntologyStore</cite> caches the ontology data files in a local directory
to prevent downloading a HPO release more than once, to save time spent during slow network access.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">store</span> <span class="o">=</span> <span class="n">hpotk</span><span class="o">.</span><span class="n">configure_ontology_store</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hpo</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">load_minimal_hpo</span><span class="p">(</span><span class="n">release</span><span class="o">=</span><span class="s1">&#39;v2023-10-09&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">hpo</span><span class="o">.</span><span class="n">version</span>
<span class="go">&#39;2023-10-09&#39;</span>
</pre></div>
</div>
<p>The store will download the ontology file the first time a release (e.g. <cite>v2023-10-09</cite>) is requested, and subsequent
loads will skip the download. The <cite>release</cite> must be a release tag, as defined
in the tag section of the <a class="reference external" href="https://github.com/obophenotype/human-phenotype-ontology/tags">HPO release page</a>.</p>
<p>Moreover, <cite>OntologyStore</cite> will load the <em>latest</em> release, if the <cite>release</cite> option is omitted.</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">hpo_latest</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">load_minimal_hpo</span><span class="p">()</span>  
<span class="gp">&gt;&gt;&gt; </span><span class="n">hpo_latest</span><span class="o">.</span><span class="n">version</span>  
<span class="go">&#39;2024-03-06&#39;</span>
</pre></div>
</div>
<p>As of the time of this writing, <code class="docutils literal notranslate"><span class="pre">2024-03-06</span></code> is the latest HPO release.</p>
<p>The store exposes the path of the ontology resources. For HPO, this is the path to the JSON file:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">fpath_hpo</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">resolve_store_path</span><span class="p">(</span><span class="n">ontology_type</span><span class="o">=</span><span class="n">hpotk</span><span class="o">.</span><span class="n">OntologyType</span><span class="o">.</span><span class="n">HPO</span><span class="p">,</span> <span class="n">release</span><span class="o">=</span><span class="s1">&#39;v2023-10-09&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fpath_hpo</span>  
<span class="go">&#39;/path/to/.hpo-toolkit/HP/hp.v2023-10-09.json&#39;</span>
</pre></div>
</div>
<p>The ontology resources can be cleaned to remove the content of the local directory:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">store</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>  
</pre></div>
</div>
</section>
</section>
<section id="support-for-other-ontologies">
<h2>Support for other ontologies<a class="headerlink" href="#support-for-other-ontologies" title="Link to this heading"></a></h2>
<p>HPO toolkit was developed to work best with HPO, since it is the flagship ontology of the toolkit’s developers.
However, support for loading of several other ontologies was tested as an experimental feature:</p>
<ul class="simple">
<li><p>Medical Action Ontology (MAxO)
* <a class="reference external" href="https://pubmed.ncbi.nlm.nih.gov/37963467">Manuscript</a>
* <a class="reference external" href="https://github.com/monarch-initiative/MAxO">GitHub</a></p></li>
<li><p>Mondo Disease Ontology (MONDO)
* <a class="reference external" href="https://mondo.monarchinitiative.org">Website</a>
* <a class="reference external" href="https://github.com/monarch-initiative/mondo">GitHub</a></p></li>
</ul>
<p>Let’s start with loading MAxO:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">maxo</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">load_minimal_ontology</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">hpotk</span><span class="o">.</span><span class="n">store</span><span class="o">.</span><span class="n">OntologyType</span><span class="o">.</span><span class="n">MAxO</span><span class="p">,</span> <span class="n">release</span><span class="o">=</span><span class="s2">&quot;v2024-05-24&quot;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prefixes_of_interest</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;MAXO&#39;</span><span class="p">},</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Note that we added the <cite>prefixes_of_interest</cite> option - a <cite>set</cite> of term prefixes that should be kept
when loading the ontology file.</p>
<p>Mondo is loaded in a very similar fashion:</p>
<div class="highlight-pycon notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">mondo</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">load_minimal_ontology</span><span class="p">(</span>
<span class="gp">... </span>    <span class="n">hpotk</span><span class="o">.</span><span class="n">OntologyType</span><span class="o">.</span><span class="n">MONDO</span><span class="p">,</span> <span class="n">release</span><span class="o">=</span><span class="s1">&#39;v2024-06-04&#39;</span><span class="p">,</span>
<span class="gp">... </span>    <span class="n">prefixes_of_interest</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;MONDO&#39;</span><span class="p">,},</span>
<span class="gp">... </span><span class="p">)</span>
</pre></div>
</div>
<p>Note, this guide shows the loading with a set versions.
However, other versions are supported as long as an existing release tag is used.
Check the ontology releases for the available tags.</p>
</section>
<section id="next-steps">
<h2>Next steps<a class="headerlink" href="#next-steps" title="Link to this heading"></a></h2>
<p>Loading an ontology is a prerequisite for doing anything useful with the ontology data. Check out
the <a class="reference internal" href="use-ontology.html#use-ontology"><span class="std std-ref">Use ontology</span></a> section for an overview of the functionality.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="User guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="use-ontology.html" class="btn btn-neutral float-right" title="Use ontology" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Daniel Danis.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>